{"version":3,"sources":["../../../src/utils/ip.ts"],"sourcesContent":["import { lanNetworkSync, lanNetwork } from 'lan-network';\n\nimport { envIsHeadless } from './env';\n\n// NOTE(@kitten): In headless mode, there's no point in trying to run DHCP, since\n// we assume we're online and probing is going to be enough\nconst options = {\n  noDhcp: envIsHeadless(),\n};\n\nexport interface GatewayInfo {\n  iname: string | null;\n  address: string;\n  gateway: string | null;\n  internal: boolean;\n}\n\nexport function getGateway(): GatewayInfo {\n  try {\n    return lanNetworkSync(options);\n  } catch {\n    return {\n      iname: null,\n      address: '127.0.0.1',\n      gateway: null,\n      internal: true,\n    };\n  }\n}\n\nexport async function getGatewayAsync(): Promise<GatewayInfo> {\n  try {\n    return await lanNetwork(options);\n  } catch {\n    return {\n      iname: null,\n      address: '127.0.0.1',\n      gateway: null,\n      internal: true,\n    };\n  }\n}\n\nexport async function getIpAddressAsync(): Promise<string> {\n  return (await getGatewayAsync()).address;\n}\n"],"names":["getGateway","getGatewayAsync","getIpAddressAsync","options","noDhcp","envIsHeadless","lanNetworkSync","iname","address","gateway","internal","lanNetwork"],"mappings":";;;;;;;;;;;IAiBgBA,UAAU;eAAVA;;IAaMC,eAAe;eAAfA;;IAaAC,iBAAiB;eAAjBA;;;;yBA3CqB;;;;;;qBAEb;AAE9B,iFAAiF;AACjF,2DAA2D;AAC3D,MAAMC,UAAU;IACdC,QAAQC,IAAAA,kBAAa;AACvB;AASO,SAASL;IACd,IAAI;QACF,OAAOM,IAAAA,4BAAc,EAACH;IACxB,EAAE,OAAM;QACN,OAAO;YACLI,OAAO;YACPC,SAAS;YACTC,SAAS;YACTC,UAAU;QACZ;IACF;AACF;AAEO,eAAeT;IACpB,IAAI;QACF,OAAO,MAAMU,IAAAA,wBAAU,EAACR;IAC1B,EAAE,OAAM;QACN,OAAO;YACLI,OAAO;YACPC,SAAS;YACTC,SAAS;YACTC,UAAU;QACZ;IACF;AACF;AAEO,eAAeR;IACpB,OAAO,AAAC,CAAA,MAAMD,iBAAgB,EAAGO,OAAO;AAC1C"}