{"version":3,"file":"multitars.mjs","sources":["../src/conversions.ts","../src/file.ts","../src/multipartShared.ts","../src/reader.ts","../src/multipartEncoding.ts","../src/multipartInput.ts","../src/multipartOutput.ts","../src/tarShared.ts","../src/tarInput.ts","../src/tarOutput.ts"],"sourcesContent":null,"names":["streamToAsyncIterable","stream","Symbol","asyncIterator","async","reader","getReader","chunk","read","done","value","streamLikeToIterator","iterator","next","iterableToStream","iterable","sourceOptions","signal","abortController","AbortController","Object","assign","ReadableStream","expectedLength","start","throwIfAborted","addEventListener","abort","reason","pull","controller","enqueue","close","error","cancel","throw","return","highWaterMark","_File","prototype","create","File","StreamFile","fileClass","lastModified","size","type","name","constructor","options","super","this","Array","isArray","Blob","bytes","streamToBuffer","byteLength","chunks","push","buffer","Uint8Array","chunkIndex","byteIndex","length","set","arrayBuffer","text","streamToText","output","decoder","TextDecoder","decode","json","JSON","parse","slice","TypeError","MultipartPart","headers","ReadableStreamBlockReader","blockSize","input","inputOffset","blockLocked","blockRewind","block","copyWithin","remaining","subarray","view","maxSize","skip","requestedSize","rewind","shiftEnd","copy","ArrayBuffer","bytesToSkipTable","skipTable","fill","endIdx","idx","indexOf","boundary","fromIndex","boundaryEndIdx","bufferEndIdx","boundaryLastByte","boundaryStartByte","bufferByte","readUntilBoundary","nextBuffer","searchIdx","bufferIdx","boundaryIdx","BOUNDARY_ID","i","Math","random","toString","pencode","c","charCodeAt","toUpperCase","ENCODE_NAME_CHARS","encodeName","replace","DECODE_ESCAPE_CHARS","DECODE_PENCODED","decodeBackslashEscape","seq","hex","String","fromCharCode","parseInt","pdecode","decodeName","encoded","CRLF","CRLF_SKIP_TABLE","boundaryHeaderRe","encoder","TextEncoder","utf8Encode","content","encode","parseContentLength","contentLength","Number","isSafeInteger","parseContentDisposition","contentDisposition","startIdx","trimEnd","disposition","filename","entry","undefined","equalIdx","key","trim","expectTrailer","trailer","trailerSkipTable","Error","decodeHeaders","fatal","ignoreBOM","header","colonIdx","headerName","toLowerCase","headerValue","parseMultipart","params","convertToBoundaryBytes","contentType","boundaryHeader","match","boundaryRaw","boundaryTrailer","raw","rawSkipTable","streamParams","ByteLengthQueuingStrategy","expectPreamble","reachedEnd","result","locked","BOUNDARY_HYPHEN_CHARS","FORM_FOOTER","isBlob","makeFormHeader","part","multipartContentType","streamMultipart","entries","blockPad","mask","BLOCK_SIZE","TarTypeFlag","initTarHeader","gax","mode","uid","gid","mtime","typeflag","FILE","linkname","uname","gname","devmajor","devminor","getTarName","_longName","_paxName","_prefix","getTarSize","_paxSize","TarChunk","_longLinkName","_paxLinkName","getTarLinkName","TarFile","from","floor","DECODER","decodePax","pax","to","keyIndex","getTypeFlag","checkMagic","checkChecksum","sum","chksum","decodeOctal","decodeString","end","decodeLongString","endIndex","val","flipped","decodeBase","endsWith","DIRECTORY","decodeHeader","LINK","SYMLINK","untar","pad","consumedTrailer","MAX_NAME_LEN","ENCODER","encodeString","target","encodeInto","encodeOctal","num","byte","octal","repeat","indexOfPrefixEnd","path","lastIndexOf","encodeHeader","encodeBase","modeToType","Date","valueOf","encodeChecksum","encodePax","encodePaxEntry","line","prefix","log10","paxName","tar","paxHeader"],"mappings":"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"}