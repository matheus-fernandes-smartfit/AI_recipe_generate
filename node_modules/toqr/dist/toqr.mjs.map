{"version":3,"file":"toqr.mjs","sources":["../src/rs.ts","../src/constants.ts","../src/qr.ts"],"names":["GF_EXP","Uint8Array","GF_LOG","i","x","gmul","a","b","gpow","pow","genRS","degree","scratch","gen","alpha","fill","j","encodeRS","input","output","byteLength","set","coef","subarray","sizeByVersion","ecSizeByVersion","ecBlocksByVersion","extentByVersion","alignmentCoordsByVersion","makeSegments","data","version","ec","capacity","segment","carry","idx","length","BYTE_MODE","byteIdx","double","getBestVersion","RangeError","encodeData","segments","numBlocks","splitIdx","blockLength","ecCount","ecStart","blockIdx","ptr","dataSize","ecBytes","setSquare","pixels","extent","fromRow","fromCol","size","end","offset","setPattern","row","col","base","y","dx","dy","writeFinderPatterns","reserved","FINDER_PATTERN_SIZE","writeAlignmentPatterns","coords","writeTimingPatterns","reserveFormatInfo","reserveVersionInfo","writeData","direction","shift","dc","c","r","xorPatternN0","rowBase","xorPatternN1","xorPatternN2","xorPatternN3","xorPatternN4","rowHalf","xorPatternN5","rc","xorPatternN6","xorPatternN7","xorPattern","pattern","computePenalty","penalty","darkBits","rowNumSame","colNumSame","rowWindow","colWindow","rowIdx","colIdx","increment","Math","abs","floor","applyBestPattern","minPenalty","bestPattern","copy","encodeFormatInfo","mask","format","result","writeFormatInfo","encodeVersionInfo","writeVersionInfo","bit","encodeBytes","encoder","TextEncoder","toQR","content","encode"],"mappings":"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"}